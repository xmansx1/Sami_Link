{% extends "dashboard/base_admin.html" %}
{% load humanize %}

{% block title %}Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø§Ù„ÙŠØ© | Ø³Ø§Ù…ÙŠ Ù„ÙŠÙ†Ùƒ{% endblock %}

{% block page_header %}
<div class="dashboard-header">
  <div class="header-content">
    <div class="welcome-section">
      <div class="badge-pill">
        <span class="pulse-dot"></span>
        Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø§Ù„ÙŠØ©
      </div>
      <h1 class="welcome-title">
        Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ù…Ø§Ù„ÙŠØ©
      </h1>
      <p class="welcome-subtitle">
        Ù†Ø¸Ø±Ø© Ø´Ø§Ù…Ù„Ø© Ø¹Ù„Ù‰ Ø§Ù„ØªØ¯ÙÙ‚Ø§Øª Ø§Ù„Ù†Ù‚Ø¯ÙŠØ©ØŒ Ø§Ù„ÙÙˆØ§ØªÙŠØ±ØŒ Ø§Ù„Ø¶Ø±Ø§Ø¦Ø¨ØŒ ÙˆÙ…Ø³ØªØ­Ù‚Ø§Øª Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†.
      </p>
    </div>

    <div class="header-stats">
      <div class="stat-pill">
        <span class="stat-icon">ğŸ“…</span>
        <div class="stat-info">
          <span class="stat-label">ØªØ§Ø±ÙŠØ® Ø§Ù„ÙŠÙˆÙ…</span>
          <span class="stat-value">{{ today|default:None|date:"d F Y" }}</span>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}

{% block content %}
<div class="dashboard-container">

  {# --- Quick Actions --- #}
  {% url 'finance:invoice_list' as invoices_url %}
  {% url 'finance:confirm_transfers' as confirm_transfers_url %}
  {% url 'finance:collections_report' as collections_url %}
  {% url 'finance:client_payments' as client_payments_url %}
  {% url 'finance:employee_dues' as employee_dues_url %}
  {% url 'finance:employee_dues_admin' as employee_dues_admin_url %}
  {% url 'finance:tax_dashboard' as tax_url %}
  {% url 'finance:inprogress_requests' as inprogress_url %}
  {% url 'finance:payouts_list' as payouts_url %}
  {% url 'finance:refunds_dashboard' as refunds_url %}
  {% url 'finance:disputes_dashboard' as disputes_url %}
  {% url 'finance:settings' as settings_fallback_url %}
  {% with settings_link=settings_url|default:settings_fallback_url %}

  <div class="quick-actions-section fade-in-up">
    <div class="quick-grid">
      <a href="{{ invoices_url }}" class="quick-tile">
        <div class="tile-icon">ğŸ“„</div>
        <span class="tile-label">ÙƒÙ„ Ø§Ù„ÙÙˆØ§ØªÙŠØ±</span>
      </a>
      <a href="{{ confirm_transfers_url }}" class="quick-tile">
        <div class="tile-icon">ğŸ“¤</div>
        <span class="tile-label">ØªØ£ÙƒÙŠØ¯ Ø§Ù„ØªØ­ÙˆÙŠÙ„Ø§Øª</span>
      </a>
      <a href="{{ employee_dues_admin_url }}" class="quick-tile">
        <div class="tile-icon">ğŸ’¸</div>
        <span class="tile-label">Ø³Ø¯Ø§Ø¯ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†</span>
      </a>
      <a href="{{ tax_url }}" class="quick-tile">
        <div class="tile-icon">ğŸ§¾</div>
        <span class="tile-label">Ù„ÙˆØ­Ø© Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©</span>
      </a>
      <a href="{{ refunds_url }}" class="quick-tile">
        <div class="tile-icon">â†©ï¸</div>
        <span class="tile-label">Ø§Ù„Ù…Ø±ØªØ¬Ø¹Ø§Øª</span>
      </a>
      <a href="{{ disputes_url }}" class="quick-tile">
        <div class="tile-icon">âš–ï¸</div>
        <span class="tile-label">Ø§Ù„Ù†Ø²Ø§Ø¹Ø§Øª</span>
      </a>
      <a href="{{ settings_link }}" class="quick-tile highlight">
        <div class="tile-icon">âš™ï¸</div>
        <span class="tile-label">Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</span>
      </a>
    </div>
  </div>
  {% endwith %}

  {# --- Primary Financial KPIs (Treasury & Liability) --- #}
  <div class="kpi-grid fade-in-up" style="animation-delay: 0.1s;">
    
    <!-- Treasury Balance -->
    <div class="kpi-card primary-card">
      <div class="kpi-top">
        <div class="kpi-icon-wrapper">ğŸ¦</div>
        <div class="kpi-trend positive">
          <span>Ø§Ù„Ø³ÙŠÙˆÙ„Ø©</span>
        </div>
      </div>
      <div class="kpi-body">
        <h3 class="kpi-value">{{ treasury_balance|default:"0"|floatformat:2|intcomma }} <small>Ø±.Ø³</small></h3>
        <p class="kpi-label">Ø±ØµÙŠØ¯ Ø§Ù„Ø®Ø²ÙŠÙ†Ø© Ø§Ù„Ø­Ø§Ù„ÙŠ</p>
        <div class="kpi-subtext">Ø¯ÙØªØ± Ø§Ù„Ø®Ø²ÙŠÙ†Ø©: {{ ledger_treasury_balance|default:"0"|floatformat:2|intcomma }} Ø±.Ø³</div>
      </div>
    </div>

    <!-- Customer Liability -->
    <div class="kpi-card secondary-card">
      <div class="kpi-top">
        <div class="kpi-icon-wrapper">ğŸ“˜</div>
        <div class="kpi-trend neutral">
          <span>Ø§Ù„ØªØ²Ø§Ù…Ø§Øª</span>
        </div>
      </div>
      <div class="kpi-body">
        <h3 class="kpi-value">{{ customer_liability|default:"0"|floatformat:2|intcomma }} <small>Ø±.Ø³</small></h3>
        <p class="kpi-label">Ø§Ù„ØªØ²Ø§Ù… Ø§Ù„Ù…Ù†ØµÙ‘Ø© Ù„Ù„Ø¹Ù…Ù„Ø§Ø¡</p>
      </div>
    </div>

    <!-- VAT Payable -->
    <div class="kpi-card warning-card">
      <div class="kpi-top">
        <div class="kpi-icon-wrapper">ğŸ§¾</div>
        <div class="kpi-trend negative">
          <span>Ù…Ø³ØªØ­Ù‚ Ù„Ù„Ù‡ÙŠØ¦Ø©</span>
        </div>
      </div>
      <div class="kpi-body">
        <h3 class="kpi-value">{{ vat_payable|default:"0"|floatformat:2|intcomma }} <small>Ø±.Ø³</small></h3>
        <p class="kpi-label">VAT ØºÙŠØ± Ù…ÙˆØ±Ù‘Ø¯Ø©</p>
      </div>
    </div>

    <!-- Platform Revenue -->
    <div class="kpi-card success-card">
      <div class="kpi-top">
        <div class="kpi-icon-wrapper">ğŸ·ï¸</div>
        <div class="kpi-trend positive">
          <span>ØµØ§ÙÙŠ Ø¯Ø®Ù„</span>
        </div>
      </div>
      <div class="kpi-body">
        <h3 class="kpi-value">{{ platform_fee_total|default:"0"|floatformat:2|intcomma }} <small>Ø±.Ø³</small></h3>
        <p class="kpi-label">Ø£Ø±Ø¨Ø§Ø­ Ø§Ù„Ù…Ù†ØµÙ‘Ø© (Ø¹Ù…ÙˆÙ„Ø©)</p>
      </div>
    </div>

  </div>

  {# --- Secondary Stats Grid --- #}
  <div class="section-container fade-in-up" style="animation-delay: 0.2s;">
    <h2 class="section-heading mb-3">ğŸ“Š Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„Ù…Ø§Ù„ÙŠ</h2>
    <div class="finance-summary-card">
      
      <div class="finance-item">
        <span class="fin-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø§Øª</span>
        <span class="fin-value text-success">{{ paid_sum|default:"0"|floatformat:2|intcomma }} <small>Ø±.Ø³</small></span>
        <div class="progress-bar"><div class="progress-fill success" style="width: 100%"></div></div>
      </div>

      <div class="finance-item">
        <span class="fin-label">Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ø³Ø¯Ø§Ø¯</span>
        <span class="fin-value text-warning">{{ unpaid_sum|default:"0"|floatformat:2|intcomma }} <small>Ø±.Ø³</small></span>
        <div class="progress-bar"><div class="progress-fill warning" style="width: 60%"></div></div>
      </div>

      <div class="finance-item">
        <span class="fin-label">Ù…Ø³ØªØ­Ù‚Ø§Øª Ù…ÙˆØ¸ÙÙŠÙ† (ØµØ§ÙÙŠ)</span>
        <span class="fin-value text-primary">{{ employee_unpaid_net_all|default:employee_unpaid_net|default:"0"|floatformat:2|intcomma }} <small>Ø±.Ø³</small></span>
        <div class="progress-bar"><div class="progress-fill primary" style="width: 45%"></div></div>
      </div>

      <div class="finance-item">
        <span class="fin-label">Ù…Ø¨Ø§Ù„Øº Ù…Ø¬Ù…Ù‘Ø¯Ø© (Ù†Ø²Ø§Ø¹)</span>
        <span class="fin-value text-danger">{{ disputed_total|default:"0"|floatformat:2|intcomma }} <small>Ø±.Ø³</small></span>
        <div class="progress-bar"><div class="progress-fill danger" style="width: 20%"></div></div>
      </div>

    </div>
  </div>

  {# --- Pending Actions Tables --- #}
  <div class="tables-grid-layout fade-in-up" style="animation-delay: 0.3s;">
    
    <!-- Pending Transfers -->
    <div class="grid-column full-width">
      <div class="section-header-row">
        <h3 class="section-heading">ğŸ“¤ ØªØ­ÙˆÙŠÙ„Ø§Øª Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„ØªØ£ÙƒÙŠØ¯</h3>
        <a href="{{ confirm_transfers_url }}" class="link-subtle">Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„</a>
      </div>
      <div class="card-shadow table-card">
        <table class="modern-table">
          <thead>
            <tr>
              <th>Ø§Ù„ÙØ§ØªÙˆØ±Ø©</th>
              <th>Ø§Ù„Ø·Ù„Ø¨</th>
              <th>Ø§Ù„Ù…Ø¨Ù„Øº</th>
              <th>Ø§Ù„Ù…Ø±Ø¬Ø¹</th>
              <th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡</th>
            </tr>
          </thead>
          <tbody>
            {% for inv in pending_bank_confirms %}
            <tr>
              <td class="font-weight-bold">#{{ inv.id }}</td>
              <td>R{{ inv.agreement.request_id }}</td>
              <td class="text-success font-weight-bold">
                {{ inv.amount|default:inv.client_total_amount|default:0|floatformat:2 }} <small>Ø±.Ø³</small>
              </td>
              <td><span class="badge-pill neutral">{{ inv.paid_ref|default:"â€”" }}</span></td>
              <td>
                <a href="{% url 'finance:invoice_detail' inv.id %}" class="btn-sm btn-outline-primary">ØªÙØ§ØµÙŠÙ„</a>
              </td>
            </tr>
            {% empty %}
            <tr>
              <td colspan="5" class="empty-state-row">
                <span class="empty-icon-sm">âœ…</span> Ù„Ø§ ØªÙˆØ¬Ø¯ ØªØ­ÙˆÙŠÙ„Ø§Øª Ù…Ø¹Ù„Ù‚Ø©
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>

    <!-- Pending Payouts -->
    <div class="grid-column">
      <div class="section-header-row">
        <h3 class="section-heading">ğŸ“ Ø£ÙˆØ§Ù…Ø± ØµØ±Ù Ù…Ø¹Ù„Ù‘Ù‚Ø©</h3>
        <a href="{{ payouts_url }}" class="link-subtle">Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„</a>
      </div>
      <div class="card-shadow table-card">
        <table class="modern-table compact">
          <thead>
            <tr>
              <th>Ø§Ù„Ù…ÙˆØ¸Ù</th>
              <th>Ø§Ù„Ù…Ø¨Ù„Øº</th>
              <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
            </tr>
          </thead>
          <tbody>
            {% for payout in payouts_unpaid %}
            <tr>
              <td>{{ payout.employee }}</td>
              <td class="font-weight-bold">{{ payout.amount|floatformat:2 }} <small>Ø±.Ø³</small></td>
              <td><span class="status-pill warning-light">{{ payout.get_status_display }}</span></td>
            </tr>
            {% empty %}
            <tr><td colspan="3" class="empty-state-row">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£ÙˆØ§Ù…Ø± ØµØ±Ù</td></tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>

    <!-- Active Disputes -->
    <div class="grid-column">
      <div class="section-header-row">
        <h3 class="section-heading">âš–ï¸ Ø§Ù„Ù†Ø²Ø§Ø¹Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø©</h3>
        <a href="{{ disputes_url }}" class="link-subtle">Ù„ÙˆØ­Ø© Ø§Ù„Ù†Ø²Ø§Ø¹Ø§Øª</a>
      </div>
      <div class="card-shadow table-card">
        <table class="modern-table compact">
          <thead>
            <tr>
              <th>Ø§Ù„Ø·Ù„Ø¨</th>
              <th>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</th>
              <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
            </tr>
          </thead>
          <tbody>
            {% for dispute in disputes_active %}
            <tr>
              <td><a href="{% url 'marketplace:request_detail' dispute.request.pk %}" class="table-link">#{{ dispute.request.pk }}</a></td>
              <td>{{ dispute.title|default:"Ù†Ø²Ø§Ø¹"|truncatechars:20 }}</td>
              <td><span class="status-pill danger-light">{{ dispute.get_status_display }}</span></td>
            </tr>
            {% empty %}
            <tr><td colspan="3" class="empty-state-row">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†Ø²Ø§Ø¹Ø§Øª Ù†Ø´Ø·Ø©</td></tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>

  </div>

</div>
{% endblock %}

{% block extra_scripts %}
<style>
  /* --- Reusing Dashboard Variables & Styles --- */
  :root {
    --dash-bg: #f8fafc;
    --card-bg: #ffffff;
    --primary-soft: #f0fdf4;
    --primary-strong: #16a34a;
    --danger-soft: #fef2f2;
    --danger-strong: #dc2626;
    --warning-soft: #fffbeb;
    --warning-strong: #d97706;
    --text-main: #1e293b;
    --text-sub: #64748b;
    --border-light: #e2e8f0;
    --shadow-card: 0 4px 6px -1px rgb(0 0 0 / 0.05), 0 2px 4px -2px rgb(0 0 0 / 0.05);
    --shadow-hover: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.05);
    --radius-card: 16px;
  }

  /* Layout */
  .dashboard-container {
    max-width: 1400px;
    margin: 0 auto;
    padding: 1.5rem;
    font-family: 'Tajawal', sans-serif;
    color: var(--text-main);
  }

  .section-heading { font-size: 1.25rem; font-weight: 800; color: var(--text-main); margin: 0; }
  .section-header-row { display: flex; align-items: baseline; margin-bottom: 1rem; gap: 0.5rem; }
  .link-subtle { margin-right: auto; font-size: 0.85rem; color: var(--primary-strong); text-decoration: none; font-weight: 600; }
  .mb-3 { margin-bottom: 1rem; }

  /* Header */
  .dashboard-header {
    background: linear-gradient(120deg, #ffffff 0%, #f0fdf4 100%);
    padding: 2rem 1.5rem;
    border-bottom: 1px solid var(--border-light);
    margin-bottom: 2rem;
  }
  .header-content {
    max-width: 1400px; margin: 0 auto; display: flex; justify-content: space-between; align-items: flex-end; flex-wrap: wrap; gap: 1.5rem;
  }
  .badge-pill {
    display: inline-flex; align-items: center; gap: 0.5rem;
    background: rgba(22, 163, 74, 0.1); color: var(--primary-strong);
    padding: 0.25rem 0.75rem; border-radius: 20px; font-size: 0.8rem; font-weight: 700; margin-bottom: 0.5rem;
  }
  .pulse-dot { width: 8px; height: 8px; background: var(--primary-strong); border-radius: 50%; animation: pulse-green 2s infinite; }
  .welcome-title { font-size: 1.8rem; font-weight: 900; margin: 0 0 0.25rem 0; color: var(--text-main); }
  .welcome-subtitle { color: var(--text-sub); margin: 0; font-size: 1rem; }
  
  .stat-pill {
    background: #fff; padding: 0.75rem 1.25rem; border-radius: 12px;
    box-shadow: var(--shadow-card); display: flex; align-items: center; gap: 0.75rem; border: 1px solid var(--border-light);
  }
  .stat-icon { font-size: 1.5rem; }
  .stat-info { display: flex; flex-direction: column; line-height: 1.2; }
  .stat-label { font-size: 0.75rem; color: var(--text-sub); }
  .stat-value { font-weight: 800; color: var(--text-main); font-size: 1rem; }

  /* Quick Actions */
  .quick-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(130px, 1fr)); gap: 1rem; margin-bottom: 2rem; }
  .quick-tile {
    background: var(--card-bg); border: 1px solid var(--border-light); border-radius: 16px;
    padding: 1.25rem; text-align: center; text-decoration: none; color: var(--text-main);
    transition: all 0.2s; display: flex; flex-direction: column; align-items: center; gap: 0.5rem;
  }
  .quick-tile:hover { transform: translateY(-3px); border-color: var(--primary-strong); background: var(--primary-soft); }
  .quick-tile.highlight { background: linear-gradient(135deg, var(--primary-soft) 0%, #fff 100%); border-color: var(--primary-strong); }
  .tile-icon { font-size: 1.5rem; }
  .tile-label { font-size: 0.85rem; font-weight: 600; }

  /* KPI Cards */
  .kpi-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 1.5rem; margin-bottom: 2.5rem; }
  .kpi-card {
    background: var(--card-bg); border-radius: var(--radius-card); padding: 1.5rem;
    box-shadow: var(--shadow-card); border: 1px solid var(--border-light);
    transition: transform 0.3s ease; display: flex; flex-direction: column;
  }
  .kpi-card:hover { transform: translateY(-5px); box-shadow: var(--shadow-hover); }
  .kpi-top { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 1rem; }
  .kpi-icon-wrapper { width: 48px; height: 48px; border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; }
  
  .primary-card .kpi-icon-wrapper { background: #ecfeff; color: #0e7490; }
  .secondary-card .kpi-icon-wrapper { background: #eef2ff; color: #3730a3; }
  .warning-card .kpi-icon-wrapper { background: #fff7ed; color: #9a3412; }
  .success-card .kpi-icon-wrapper { background: var(--primary-soft); color: var(--primary-strong); }

  .kpi-trend { font-size: 0.75rem; font-weight: 600; padding: 0.25rem 0.5rem; border-radius: 6px; }
  .kpi-trend.positive { background: #dcfce7; color: #166534; }
  .kpi-trend.negative { background: #fee2e2; color: #991b1b; }
  .kpi-trend.neutral { background: #f1f5f9; color: #475569; }

  .kpi-value { font-size: 1.8rem; font-weight: 800; margin: 0; line-height: 1; color: var(--text-main); }
  .kpi-value small { font-size: 0.9rem; font-weight: 600; color: var(--text-sub); }
  .kpi-label { color: var(--text-sub); margin: 0.5rem 0 0 0; font-size: 0.9rem; }
  .kpi-subtext { font-size: 0.75rem; color: var(--text-sub); margin-top: 0.5rem; opacity: 0.8; }

  /* Finance Summary */
  .finance-summary-card {
    background: var(--card-bg); border-radius: var(--radius-card); padding: 2rem;
    box-shadow: var(--shadow-card); border: 1px solid var(--border-light);
    display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 2rem; margin-bottom: 2.5rem;
  }
  .finance-item { display: flex; flex-direction: column; gap: 0.5rem; }
  .fin-label { font-size: 0.85rem; color: var(--text-sub); font-weight: 600; }
  .fin-value { font-size: 1.25rem; font-weight: 800; }
  .text-success { color: var(--primary-strong); }
  .text-warning { color: var(--warning-strong); }
  .text-danger { color: var(--danger-strong); }
  .text-primary { color: #2563eb; }
  .progress-bar { height: 6px; background: #f1f5f9; border-radius: 3px; overflow: hidden; margin-top: 0.25rem; }
  .progress-fill { height: 100%; border-radius: 3px; }
  .progress-fill.success { background: var(--primary-strong); }
  .progress-fill.warning { background: var(--warning-strong); }
  .progress-fill.danger { background: var(--danger-strong); }
  .progress-fill.primary { background: #2563eb; }

  /* Tables */
  .tables-grid-layout { display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 2rem; margin-bottom: 2.5rem; }
  .grid-column.full-width { grid-column: 1 / -1; }
  
  .card-shadow { background: var(--card-bg); border-radius: var(--radius-card); box-shadow: var(--shadow-card); border: 1px solid var(--border-light); overflow: hidden; }
  .modern-table { width: 100%; border-collapse: collapse; }
  .modern-table th { background: #f8fafc; padding: 1rem 1.5rem; text-align: right; font-size: 0.85rem; color: var(--text-sub); font-weight: 600; border-bottom: 1px solid var(--border-light); }
  .modern-table td { padding: 1rem 1.5rem; border-bottom: 1px solid var(--border-light); vertical-align: middle; }
  .modern-table tr:hover { background: #fcfcfc; }
  
  .status-pill { display: inline-block; padding: 0.25rem 0.75rem; border-radius: 20px; font-size: 0.75rem; font-weight: 700; }
  .status-pill.warning-light { background: #fffbeb; color: #d97706; }
  .status-pill.danger-light { background: #fee2e2; color: #dc2626; }
  .badge-pill.neutral { background: #f1f5f9; color: #475569; padding: 0.25rem 0.5rem; border-radius: 6px; font-size: 0.75rem; }
  
  .btn-sm { padding: 0.4rem 0.8rem; border-radius: 8px; font-size: 0.8rem; font-weight: 600; text-decoration: none; display: inline-block; }
  .btn-outline-primary { border: 1px solid var(--primary-strong); color: var(--primary-strong); background: transparent; }
  .btn-outline-primary:hover { background: var(--primary-soft); }
  
  .empty-state-row { text-align: center; padding: 2rem; color: var(--text-sub); font-size: 0.9rem; }
  .empty-icon-sm { font-size: 1.2rem; margin-left: 0.5rem; }
  .table-link { text-decoration: none; color: inherit; font-weight: 700; }
  .table-link:hover { color: var(--primary-strong); }

  /* Animation */
  .fade-in-up { animation: fadeInUp 0.6s ease-out forwards; opacity: 0; transform: translateY(20px); }
  @keyframes fadeInUp { to { opacity: 1; transform: translateY(0); } }
  @keyframes pulse-green {
    0% { box-shadow: 0 0 0 0 rgba(22, 163, 74, 0.7); }
    70% { box-shadow: 0 0 0 6px rgba(22, 163, 74, 0); }
    100% { box-shadow: 0 0 0 0 rgba(22, 163, 74, 0); }
  }
</style>
{% endblock %}
