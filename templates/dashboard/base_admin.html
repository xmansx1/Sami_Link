{# قالب أساس لكل صفحات الإدارة #}
{% load static %}
{% load humanize %}
<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>{% block title %}مساحة الإدارة{% endblock %}</title>

  {# خط عربي مريح #}
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;800&display=swap" rel="stylesheet">

  {# لو عندك Tailwind مدمج عبر app.css—أبقه #}
  <link rel="stylesheet" href="{% static 'css/app-new.css' %}">
  <link rel="stylesheet" href="{% static 'css/icons.css' %}">

  {% block extra_head %}{% endblock %}

  <style>
    :root{
      --bg:#f5f7fb; --card:#ffffff; --muted:#64748b; --border:#e2e8f0;
      --brand:#2563eb; --brand-2:#7c3aed; --ok:#059669; --warn:#f59e0b; --danger:#e11d48;
    }
    html,body{height:100%} body{background:linear-gradient(180deg,#f8fafc,#eef2f7);font-family:"Tajawal",sans-serif}
    .layout{display:grid;grid-template-columns:250px 1fr;min-height:100vh}
    .sidebar{background:#0f172a;color:#e5e7eb}
    .sidebar a{display:flex;align-items:center;gap:.6rem;color:#cbd5e1;padding:.7rem 1rem;border-radius:.8rem}
    .sidebar a:hover,.sidebar a.active{background:#1f2937;color:#fff}
    .topbar{background:var(--card);border-bottom:1px solid var(--border)}
    .container{max-width:1280px;margin:0 auto;padding:1rem}
    .card{background:var(--card);border:1px solid var(--border);border-radius:1rem;padding:1rem}
    @media(min-width:768px){.card{padding:1.4rem}}
    .kpi{font-weight:800;font-size:1.7rem}
    .lbl{color:var(--muted);font-size:.9rem}
    .btn{display:inline-flex;align-items:center;gap:.5rem;border-radius:12px;padding:.5rem .9rem;font-weight:700}
    .btn-blue{background:var(--brand);color:#fff}.btn-blue:hover{filter:brightness(.95)}
    .btn-green{background:var(--ok);color:#fff}.btn-green:hover{filter:brightness(.95)}
    .btn-purple{background:var(--brand-2);color:#fff}.btn-purple:hover{filter:brightness(.95)}
    .btn-rose{background:var(--danger);color:#fff}.btn-rose:hover{filter:brightness(.95)}
    .btn-gray{background:#f1f5f9;color:#0f172a;border:1px solid var(--border)}
    .table{width:100%;font-size:.925rem}
    .table th{color:#475569;font-weight:600;text-align:right}
    .table td,.table th{padding:.65rem .25rem}
    .table tr+tr{border-top:1px solid #eef2f7}
    .fade-in{animation:fadeIn .45s ease both}@keyframes fadeIn{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:none}}
  </style>
</head>
<body>

<div class="layout">
  {# ============ Sidebar ============ #}
  <aside class="sidebar">
    <div class="p-4 text-lg font-extrabold">لوحة المدير</div>

    {% include "dashboard/partials/_sidebar.html" %}
  </aside>

  {# ============ Main ============ #}
  <main>
    <div class="topbar">
      <div class="container flex items-center justify-between gap-3">
        {% include "dashboard/partials/_topbar.html" %}
      </div>
    </div>

    <div class="container fade-in">
      {% block page_header %}{% endblock %}
      {% if messages %}
        <div class="my-3 space-y-2">
          {% for m in messages %}
            <div class="card" style="border-color:#dbeafe;background:#eff6ff">{{ m }}</div>
          {% endfor %}
        </div>
      {% endif %}
      {% block content %}{% endblock %}
    </div>
  </main>
</div>

{% block extra_js %}{% endblock %}
</body>
</html>
