{# templates/home.html #}
{% extends "base.html" %}
{% load static %}
{% block title %}ููุตุฉ ุณุงูู ูููู ุงูุชูููุฉ โ ูุณูุท ุณุนูุฏู ููุซูู{% endblock %}

{# ===== ุชูุจูู ุนุฏู ุงูุชุนุงูู ุฎุงุฑุฌ ุงูููุตุฉ (ูุธูุฑ ููุง ููุท) ===== #}
{% block platform_notice %}
  <div id="platformNoticeCard" class="platform-warning-card" role="status" aria-live="polite">
    <div class="pw-icon">๐ก๏ธ</div>
    <div class="pw-body">
      <div class="pw-title">ุชูุจูู ููู ูุจู ุงูุจุฏุก</div>
      <div class="pw-text">
        ุงูููุตูุฉ ุบูุฑ ูุณุคููุฉ ุนู ุฃู ุชุนุงููุงุช ุฃู ุฏูุนุงุช ุฎุงุฑุฌ ุณุงูู ูููู.
        ุญูุงุธูุง ุนูู ุญููููุ ุฃููู ุงูุงุชูุงู ูุงูุฏูุน ุฏุงุฎู ุงูููุตูุฉ ููุท.
      </div>
    </div>
    <button type="button"
            class="alert-close"
            id="platformNoticeClose"
            aria-label="ุฅุบูุงู ุงูุชูุจูู"
            style="color:#fff;opacity:.9;margin-inline-start:auto;">
      โ
    </button>
  </div>
{% endblock %}

{% block page_hero %}
{# ูุณู ุงูุจุทู - ุฎุงุฑุฌ ุงููุญุชูู ุงูุฑุฆูุณู ููุงุณุชูุงุฏุฉ ูู ุงูุชุฎุทูุท ุงูุฎุงุต #}
<section id="hero" class="hero-section">
  <div class="container">
    <div class="hero-content fade-in">
      <div class="hero-text">
        <div class="hero-badge">
          <span>ูุณูุท ุณุนูุฏู ููุธู</span>
        </div>

        <h1 class="hero-title">
          ุฅุฏุงุฑุฉ <span>ุงุญุชุฑุงููุฉ</span> ูุฏูุฑุฉ ุนููู ูู ุฃูู ุทูุจ ุญุชู ุขุฎุฑ ูุงุชูุฑุฉ
        </h1>

        <p class="hero-description">
          ููุตุฉ ุณุงูู ูููู ูุณูุท ุณุนูุฏู ูกูููช ููุธู ุงูุนูุงูุฉ ุจูู ุงูุนููุงุก ูุงูุชููููู ุจุฏูุฑุฉ ุนูู ูุงุถุญุฉุ
          ููุงุชูุฑ ูุธุงููุฉุ ูุญูุงูุฉ ูุงููุฉ ููุทุฑููู ุจูุง ูุชูุงูู ูุน ุงูุฃูุธูุฉ ุงูุณุนูุฏูุฉ.
        </p>

        <div class="hero-features">
          <div class="hero-feature">
            <div class="hero-feature-icon">โ</div>
            <div class="hero-feature-text">ุฅุฎูุงุก ุจูุงูุงุช ุงูุนููู ุฃุซูุงุก ูุฑุญูุฉ ุงูุนุฑูุถ ูุฑูุน ูุณุชูู ุงูุฃูุงู ูุงูุฎุตูุตูุฉ</div>
          </div>
          <div class="hero-feature">
            <div class="hero-feature-icon">โ</div>
            <div class="hero-feature-text">ูุณุงุฑ ูุงูู ููุธู ูุน ููุงุชูุฑ ูุธุงููุฉ ูุฑุณูู ูุถุฑูุจุฉ ูุญุฏุฏุฉ ุจูุถูุญ</div>
          </div>
          <div class="hero-feature">
            <div class="hero-feature-icon">โ</div>
            <div class="hero-feature-text">ุชููููู ุณุนูุฏููู ุชู ุงูุชุญูู ูู ูููุงุชูู ูุฎุจุฑุงุชูู ูุจู ุงูุงูุถูุงู ููููุตุฉ</div>
          </div>
        </div>

        <div class="hero-actions">
          <a href="{% url 'marketplace:request_create' %}" class="btn btn-primary">
            โ ุงุทูุจ ุฎุฏูุฉ
          </a>

          {% if user.is_authenticated %}
            {% if user.role == 'client' %}
              <a href="{% url 'marketplace:my_requests' %}" class="btn btn-secondary">
                ๐ ุฅุฏุงุฑุฉ ุทูุจุงุชู
              </a>
            {% elif user.role == 'employee' or user.role == 'tech' %}
              <a href="{% url 'marketplace:my_tasks' %}" class="btn btn-secondary">
                ๐๏ธ ุนุฑุถ ููุงูู
              </a>
            {% else %}
              <a href="{% url 'dashboard:admin_dashboard' %}" class="btn btn-secondary">
                ๐ ุงูุงูุชูุงู ูููุญุฉ ุงูุชุญูู
              </a>
            {% endif %}
          {% else %}
            <a href="{% url 'accounts:register' %}" class="btn btn-secondary">
              ๐ ุงุจุฏุฃ ุงูุขู
            </a>
          {% endif %}

          <a href="#how-it-works" class="btn btn-outline">
            โน๏ธ ุชุนุฑู ุนูู ุงูููุตุฉ
          </a>
        </div>
      </div>

      <div class="hero-visual scroll-reveal">
        <div class="hero-card">
          <div class="hero-card-header">
            <h2 class="hero-card-title">ูุณุงุฑ ูุงุญุฏ ูุงุถุญ ููู ุงูุฃุทุฑุงู</h2>
            <p class="hero-card-description">ุฑุญูุฉ ููุธูุฉ ูู ุงูุทูุจ ุญุชู ุงูุชุณููู</p>
          </div>

          <div class="hero-steps">
            <div class="hero-step">
              <div class="step-number">1</div>
              <div class="step-content">
                <div class="step-title">ุทูุจ ููุญุฏ ููุงุถุญ</div>
                <div class="step-description">
                  ูููู ุงูุนููู ุจุชุญุฏูุฏ ุงูุงุญุชูุงุฌ ุงูุชูููุ ููุน ุงูุฎุฏูุฉุ ุงููุฏุฉ ุงููุชููุนุฉ ูุงูููุฒุงููุฉ ุจุดูู ููุธู.
                </div>
              </div>
            </div>

            <div class="hero-step">
              <div class="step-number">2</div>
              <div class="step-content">
                <div class="step-title">ุนุฑูุถ ูู ุชููููู ููุซูููู</div>
                <div class="step-description">
                  ุชุตู ุนุฑูุถ ูู ุชููููู ุณุนูุฏููู ูุนุชูุฏูู ุฏุงุฎู ุงูููุตุฉุ ูุน ุชูุงุตูู ุงูุณุนุฑุ ุงููุฏุฉุ ููุทุงู ุงูุนูู.
                </div>
              </div>
            </div>

            <div class="hero-step">
              <div class="step-number">3</div>
              <div class="step-content">
                <div class="step-title">ุงุชูุงููุฉ ุจูุฑุงุญู ูุชุณููุฉ ุขููุฉ</div>
                <div class="step-description">
                  ุจุนุฏ ุงุฎุชูุงุฑ ุงูุนุฑุถ ุงูุฃูุณุจ ุชููุดุฃ ุงุชูุงููุฉ ุจูุฑุงุญู ุฏูุน ูุงุถุญุฉุ
                  ูุชุชู ุฅุฏุงุฑุฉ ุงูุชูููุฐ ูุงูููุงุญุธุงุช ุฏุงุฎู ุณุงูู ูููู.
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>
</section>
{% endblock %}

{% block content %}

<!-- ูุณู ููู ุชุนูู ุงูููุตุฉ -->
<section id="how-it-works" class="section how-it-works">
  <div class="container">
    <div class="section-header scroll-reveal">
      <div class="section-badge">๐ ุนูููุฉ ููุธูุฉ</div>
      <h2 class="section-title">ููู ุชุนูู ููุตุฉ ุณุงูู ููููุ</h2>
      <p class="section-description">
        ุฑุญูุฉ ููุธูุฉ ูู ุงูุทูุจ ุญุชู ุงูุฅููุงูุ ุจุฎุทูุงุช ุจุณูุทุฉ ููุงุถุญุฉ ููู ูู ุงูุนููู ูุงูุชููู.
      </p>
    </div>

    <div class="steps-grid">
      <div class="step-card scroll-reveal">
        <div class="step-number-large">ูก</div>
        <div class="step-icon">๐</div>
        <h3 class="step-title">ุฅูุดุงุก ุงูุทูุจ</h3>
        <p class="step-description">
          ูููู ุงูุนููู ุจุฅูุดุงุก ุทูุจ ุฌุฏูุฏุ ูุชูุถูุญ ุทุจูุนุฉ ุงููุดุฑูุน ุฃู ุงููููุฉุ ูุงููุฏุฉ ุงููุชููุนุฉ ูุงูููุฒุงููุฉุ ูุน ุฅููุงููุฉ ุฅุฑูุงู ูููุงุช ุชูุถูุญูุฉ.
        </p>
      </div>

      <div class="step-card scroll-reveal">
        <div class="step-number-large">ูข</div>
        <div class="step-icon">๐ผ</div>
        <h3 class="step-title">ุงุณุชูุจุงู ุงูุนุฑูุถ</h3>
        <p class="step-description">
          ุชูุฑุณู ุฅุดุนุงุฑุงุช ููุชููููู ุงูููุงุณุจููุ ููููููู ุจุชูุฏูู ุนุฑูุถูู ุฏุงุฎู ุงูููุตุฉ ูุน ุชูุงุตูู ุงูุณุนุฑุ ุงููุฏุฉุ ูุทุฑููุฉ ุงูุชูููุฐ.
        </p>
      </div>

      <div class="step-card scroll-reveal">
        <div class="step-number-large">ูฃ</div>
        <div class="step-icon">๐</div>
        <h3 class="step-title">ุงูุงุชูุงููุฉ ูุงูููุงุชูุฑ</h3>
        <p class="step-description">
          ุจุนุฏ ุงุฎุชูุงุฑ ุงูุนุฑุถ ุงูุฃูุณุจุ ุชููุดุฃ ุงุชูุงููุฉ ุชุญุชูู ุนูู ูุฑุงุญู ุนูู ูุฏูุนุงุชุ ูุชูุฑุจุท ุขูููุง ุจููุงุชูุฑ ุชุตุฏุฑ ูู ุงูููุตุฉ.
        </p>
      </div>

      <div class="step-card scroll-reveal">
        <div class="step-number-large">ูค</div>
        <div class="step-icon">โ</div>
        <h3 class="step-title">ุงูุชูููุฐ ูุงูุชุณููู</h3>
        <p class="step-description">
          ูุชู ูุชุงุจุนุฉ ุงูุชูููุฐ ูุฑุณุงุฆู ุงููุญุงุฏุซุฉ ูุฑูุน ุงููููุงุช ุนุจุฑ ุงูููุตุฉุ ูุน ุฅููุงููุฉ ูุชุญ ูุฒุงุน ุนูุฏ ุงูุญุงุฌุฉ ูุถุจุท ุญููู ุฌููุน ุงูุฃุทุฑุงู.
        </p>
      </div>
    </div>
  </div>
</section>

<!-- ูุณู ุงูุชููููู - ูุฑูุช ุตุบูุฑุฉ ุงุญุชุฑุงููุฉ + ุตูุฑ -->
<section id="team" class="section team-section team-section--mini">
  <div class="container">
    <div class="section-header scroll-reveal">
      <div class="section-badge">๐ฅ ุงูุชููููู</div>
      <h2 class="section-title">ุงูุชููููู ุงูุณุนูุฏููู ูู ุณุงูู ูููู</h2>
      <p class="section-description">
        ุชููููู ุณุนูุฏููู ุชู ุงูุชุญูู ูู ูููุงุชูู ูุฎุจุฑุงุชูู ูุจู ูุจูููู ูู ุงูููุตุฉ.
      </p>
    </div>

    {# ุฏุนู ูุชุบูุฑุงุช ูุฏููุฉ/ุฌุฏูุฏุฉ ุจุฏูู ูุณุฑ #}
    {% if featured_employees %}
      {% with tech_list=featured_employees %}
        {% include "website/_tech_mini_grid.html" %}
      {% endwith %}
    {% elif team_members %}
      {% with tech_list=team_members %}
        {% include "website/_tech_mini_grid.html" %}
      {% endwith %}
    {% else %}
      <div class="mini-tech-grid">
        {% for i in "1234" %}
          <article class="mini-tech-card scroll-reveal" aria-label="ุชููู">
            <div class="mini-tech-head">
              <div class="mini-tech-avatar">
                {% if i.avatar_url %}
                  <img src="{{ i.avatar_url }}" alt="ุชููู ุณุนูุฏู {{ i }}" loading="lazy" />
                {% elif i.avatar %}
                  <img src="{{ i.avatar.url }}" alt="ุชููู ุณุนูุฏู {{ i }}" loading="lazy" />
                {% elif i.image %}
                  <img src="{{ i.image.url }}" alt="ุชููู ุณุนูุฏู {{ i }}" loading="lazy" />
                {% elif i.photo %}
                  <img src="{{ i.photo.url }}" alt="ุชููู ุณุนูุฏู {{ i }}" loading="lazy" />
                {% elif i.profile_image %}
                  <img src="{{ i.profile_image.url }}" alt="ุชููู ุณุนูุฏู {{ i }}" loading="lazy" />
                {% elif i.profile and i.profile.avatar %}
                  <img src="{{ i.profile.avatar.url }}" alt="ุชููู ุณุนูุฏู {{ i }}" loading="lazy" />
                {% elif i.profile and i.profile.photo %}
                  <img src="{{ i.profile.photo.url }}" alt="ุชููู ุณุนูุฏู {{ i }}" loading="lazy" />
                {% elif i.profile and i.profile.image %}
                  <img src="{{ i.profile.image.url }}" alt="ุชููู ุณุนูุฏู {{ i }}" loading="lazy" />
                {% else %}
                  <img src="{% static 'img/avatar-placeholder.png' %}" alt="ุชููู ุณุนูุฏู {{ i }}" loading="lazy" />
                {% endif %}
              </div>
              <div class="mini-tech-info">
                <div class="mini-tech-name">ุชููู ุณุนูุฏู {{ i }}</div>
                <div class="mini-tech-sub">ุชููู ุณุนูุฏู ูุนุชูุฏ</div>
              </div>
            </div>
            <div class="mini-tech-skills">
              <span class="skill-tag-small">Django</span>
              <span class="skill-tag-small">React</span>
              <span class="skill-tag-small">API</span>
            </div>
          </article>
        {% endfor %}
      </div>
    {% endif %}

    <div class="center-actions scroll-reveal" style="margin-top: 1.75rem;">
      <a href="{% url 'profiles:employees_list' %}" class="btn btn-secondary">
        ๐ฅ ุนุฑุถ ุฌููุน ุงูุชููููู
      </a>
    </div>
  </div>
</section>

<!-- ูุณู ุงูุชูุงุตู -->
<section id="contact" class="section contact-section">
  <div class="container">
    <div class="contact-grid">
      <div class="contact-info scroll-reveal">
        <div class="section-header" style="text-align: right;">
          <div class="section-badge">๐ ุฏุนู ูุณุชูุฑ</div>
          <h2 class="section-title">ุชูุงุตู ูุน ูุฑูู ุณุงูู ูููู</h2>
          <p class="section-description" style="margin: 0;">
            ููุงุณุชูุณุงุฑุงุชุ ุงูุดุฑุงูุงุชุ ุฃู ุงูุชุฌุฑุจุฉ ุงูุฃููู ููููุตุฉุ ูุณุนุฏูุง ุชูุงุตูู ูุนูุง ุนุจุฑ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ุฃู ุงููุงุชุณุงุจ.
          </p>
        </div>

        <div class="contact-methods">
          <div class="contact-method">
            <div class="contact-icon">๐ง</div>
            <div class="contact-details">
              <div class="contact-label">ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ุงูุฑุณูู</div>
              <a href="mailto:support@samilink.sa" class="contact-value">support@samilink.sa</a>
            </div>
          </div>

          <div class="contact-method">
            <div class="contact-icon">๐ฌ</div>
            <div class="contact-details">
              <div class="contact-label">ูุงุชุณุงุจ ุฎุฏูุฉ ุงูุนููุงุก</div>
              <a href="https://wa.me/966500000000" class="contact-value">+966 50 000 0000</a>
            </div>
          </div>

          <div class="contact-method">
            <div class="contact-icon">๐</div>
            <div class="contact-details">
              <div class="contact-label">ุฃููุงุช ุงูุนูู</div>
              <div class="contact-value">ุงูุฃุญุฏ - ุงูุฎููุณ: ูจ ุต - ูฅ ู</div>
            </div>
          </div>
        </div>
      </div>

      <div class="contact-sidebar scroll-reveal">
        <div class="sidebar-badge">๐ ุฌุงูุฒูู ููุฑุงููุชู</div>
        <h3 class="sidebar-title">ูู ุฃูู ุทูุจ ุญุชู ุงูุชุณููู</h3>
        <p class="sidebar-description">
          ูููู ุชููุฆุฉ ุงูููุตุฉ ููุงุณุชุฎุฏุงู ุงูุฏุงุฎูู ูู ุดุฑูุชู ุฃู ูุฑูููุ ูุน ุตูุงุญูุงุช ูุงููุฉ ูุฅุฏุงุฑูุฉ ูุชูุฏูุฉ
          ูุชูุงุฑูุฑ ูุชุงุจุนุฉ ูุฎุตุตุฉ ุจุญุณุจ ุงุญุชูุงุฌ ุงูุฅุฏุงุฑุฉ.
        </p>

        <div style="margin-top: 1.5rem;">
          <a href="mailto:support@samilink.sa?subject=ุทูุจ ุดุฑุงูุฉ" class="btn btn-primary">
            ๐ค ุทูุจ ุดุฑุงูุฉ
          </a>
        </div>
      </div>
    </div>
  </div>
</section>

{% endblock %}

{% block extra_scripts %}
{{ block.super }}
<script>
(function() {

    // --- ุฅุฎูุงุก ุชูุจูู ุงูููุตูุฉ ุจุนุฏ 3 ุซูุงูู ---
    var pn = document.getElementById("platformNoticeCard");
    var pnClose = document.getElementById("platformNoticeClose");
    if (pn) {
      var hidePlatformNotice = function(){
        pn.style.opacity = "0";
        pn.style.transform = "translateY(6px)";
        setTimeout(function(){ pn.remove(); }, 220);
      };

      setTimeout(hidePlatformNotice, 60000);

      if (pnClose) {
        pnClose.addEventListener("click", function(){
          hidePlatformNotice();
        });
      }
    }

    if (typeof initScrollReveal === 'function') {
        initScrollReveal();
    }
    if (typeof initGlobalAnimations === 'function') {
        initGlobalAnimations();
    }
    if (typeof initButtonEffects === 'function') {
        initButtonEffects();
    }

    document.addEventListener('DOMContentLoaded', function() {
        const ctaButtons = document.querySelectorAll('.hero-actions .btn');
        ctaButtons.forEach((btn, index) => {
            btn.style.animationDelay = `${index * 0.1 + 0.5}s`;
        });

        const stepCards = document.querySelectorAll('.step-card');
        stepCards.forEach(card => {
            card.addEventListener('mouseenter', function() {
                this.style.transform = 'translateY(-10px)';
                this.style.boxShadow = 'var(--shadow-xl)';
            });
            card.addEventListener('mouseleave', function() {
                this.style.transform = 'translateY(-5px)';
                this.style.boxShadow = 'var(--shadow-lg)';
            });
        });

        const techCards = document.querySelectorAll('.mini-tech-card');
        techCards.forEach(card => {
            card.addEventListener('mouseenter', function() {
                this.style.transform = 'translateY(-5px) scale(1.02)';
            });
            card.addEventListener('mouseleave', function() {
                this.style.transform = 'translateY(0) scale(1)';
            });
        });
    });

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                if (typeof scrollToElement === 'function') {
                    scrollToElement(target);
                } else {
                    target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            }
        });
    });

    window.addEventListener('load', function() {
        document.body.classList.add('loaded');
        const revealElements = document.querySelectorAll('.scroll-reveal');
        revealElements.forEach((el, index) => {
            el.style.animationDelay = `${index * 0.1}s`;
        });
    });

})();
</script>

<style>
.hero-section {
    position: relative;
    overflow: hidden;
}
.hero-section::before {
    content: '';
    position: absolute;
    top: -50%;
    right: -20%;
    width: 100%;
    height: 200%;
    background: radial-gradient(circle, rgba(34, 197, 94, 0.05) 0%, transparent 70%);
    z-index: -1;
}

.team-section--mini {
    background: linear-gradient(135deg, var(--primary-50) 0%, var(--white) 100%);
}

/* ุดุจูุฉ ุงููุฑูุช */
.mini-tech-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
    gap: 1rem;
    margin-top: 1.75rem;
    max-width: 980px;
    margin-left: auto;
    margin-right: auto;
}

.mini-tech-card {
    background: var(--white);
    border-radius: 16px;
    padding: 1rem;
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--dark-200);
    transition: transform .2s ease, box-shadow .2s ease, border-color .2s ease;
}

.mini-tech-card:hover {
    transform: translateY(-4px);
    box-shadow: var(--shadow-md);
    border-color: var(--primary-200);
}

.mini-tech-head {
    display: flex;
    align-items: center;
    gap: .75rem;
    margin-bottom: .75rem;
}

/* ุงูุตูุฑุฉ ุงูุดุฎุตูุฉ */
.mini-tech-avatar {
    width: 48px;
    height: 48px;
    border-radius: 999px;
    overflow: hidden;
    background: var(--primary-50, #eff6ff);
    border: 2px solid var(--primary-200, #bfdbfe);
    flex: 0 0 auto;
}
.mini-tech-avatar img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display:block;
}

.mini-tech-info {
    text-align: right;
    flex: 1;
    min-width: 0;
}

.mini-tech-name {
    font-weight: 800;
    color: var(--dark-900);
    margin-bottom: 0.1rem;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.mini-tech-sub {
    color: var(--muted, #64748b);
    font-size: 0.85rem;
    font-weight: 600;
}

.mini-tech-skills {
    display: flex;
    flex-wrap: wrap;
    gap: .35rem;
}

.skill-tag-small{
    background: var(--primary-50, #eff6ff);
    border: 1px solid var(--primary-200, #bfdbfe);
    color: var(--primary-700, #1d4ed8);
    padding: .25rem .55rem;
    border-radius: 999px;
    font-size: .78rem;
    font-weight: 700;
}

.center-actions { text-align:center; }

@media (max-width: 768px) {
    .hero-content { grid-template-columns: 1fr; gap: 2rem; }
    .hero-title { font-size: 2.5rem; }
    .steps-grid { grid-template-columns: 1fr; }
    .contact-grid { grid-template-columns: 1fr; }
}

@media (max-width: 420px) {
    .mini-tech-grid { grid-template-columns: 1fr; }
}
</style>
{% endblock %}
