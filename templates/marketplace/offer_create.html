{% extends "base.html" %}
{% block title %}ØªÙ‚Ø¯ÙŠÙ… Ø¹Ø±Ø¶{% endblock %}

{% block content %}
<section class="page-section offer-create-page">
  <div class="container">
    
    {# ===== Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© ===== #}
    <div class="profile-section" style="max-width: 800px; margin: 0 auto;">
      
      {# ===== Ø±Ø£Ø³ Ø§Ù„ØµÙØ­Ø© ===== #}
      <div class="card-header" style="background: linear-gradient(135deg, var(--primary-50) 0%, var(--secondary-50) 100%); border-bottom: 1px solid var(--primary-200);">
        <div class="card-row" style="display: flex; align-items: center; justify-content: space-between; gap: 1rem;">
          <div style="flex: 1;">
            <h1 class="card-section-title" style="margin: 0; color: var(--dark-900);">
              ğŸ“¨ ØªÙ‚Ø¯ÙŠÙ… Ø¹Ø±Ø¶
            </h1>
            <p class="card-section-note" style="margin-top: 0.5rem;">
              ÙŠÙ…ÙƒÙ†Ùƒ ØªÙ‚Ø¯ÙŠÙ… <strong>Ø¹Ø±Ø¶ ÙˆØ§Ø­Ø¯ ÙÙ‚Ø·</strong> Ø¹Ù„Ù‰ Ù‡Ø°Ø§ Ø§Ù„Ø·Ù„Ø¨. Ø¥Ø°Ø§ Ù‚Ø¨Ù„ Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø¹Ø±Ø¶Ùƒ Ø³ÙŠÙØ³Ù†ÙØ¯ Ø§Ù„Ø·Ù„Ø¨ Ù„Ùƒ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§.
            </p>
          </div>
        </div>
      </div>

      {# ===== Ø¬Ø³Ù… Ø§Ù„ØµÙØ­Ø© ===== #}
      <div class="card-body">

        {# Ù…Ù„Ø®Ù‘Øµ Ø£Ø®Ø·Ø§Ø¡ Ø¹Ø§Ù…Ø© #}
        {% if form.non_field_errors %}
          <div class="toast error" style="position: relative; margin-bottom: 1.5rem;">
            <div class="toast-message">
              {% for e in form.non_field_errors %}<div>â€¢ {{ e }}</div>{% endfor %}
            </div>
          </div>
        {% endif %}

        <form id="offerForm" method="post" class="offer-form" novalidate autocomplete="off">
          {% csrf_token %}

          {# Ø£ÙŠ Ø­Ù‚ÙˆÙ„ Ù…Ø®ÙÙŠØ© (Ù…Ø«Ù„ request) #}
          {% for hf in form.hidden_fields %}
            {{ hf }}
          {% endfor %}

          {# ===== ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¹Ø±Ø¶ (note) ===== #}
          <div class="form-field">
            <label for="id_note" class="form-label">
              ğŸ“ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¹Ø±Ø¶
            </label>
            <textarea id="id_note" name="note" rows="6"
                      class="input textarea-large"
                      minlength="10" maxlength="2000" required
                      placeholder="Ø§Ø´Ø±Ø­ Ù†Ø·Ø§Ù‚ Ø§Ù„Ø¹Ù…Ù„ØŒ Ø§Ù„Ù…Ø®Ø±Ø¬Ø§ØªØŒ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶Ø§Øª ÙˆØ£ÙŠ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ù„Ù„Ø¹Ù…ÙŠÙ„..."
                      autofocus>{{ form.note.value|default_if_none:'' }}</textarea>
            {% if form.note.errors %}
              <div class="field-error">
                {% for e in form.note.errors %}<div>â€¢ {{ e }}</div>{% endfor %}
              </div>
            {% endif %}
            <div class="field-hint-row">
              <span class="field-hint">Ø§ÙƒØªØ¨ ÙˆØµÙÙ‹Ø§ ÙˆØ§Ø¶Ø­Ù‹Ø§ ÙˆØ´Ø§Ù…Ù„Ø§Ù‹ Ù„Ù„Ø¹Ù…Ù„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨</span>
              <span id="descCount" class="field-counter">0/2000</span>
            </div>
          </div>

          {# ===== Ø§Ù„Ø´Ø¨ÙƒØ©: Ø§Ù„Ù…Ø¯Ø© + Ø§Ù„Ø³Ø¹Ø± ===== #}
          <div class="form-grid-2">
            
            {# Ø§Ù„Ù…Ø¯Ø© Ø§Ù„Ù…Ù‚ØªØ±Ø­Ø© #}
            <div class="form-field">
              <label for="id_proposed_duration_days" class="form-label">
                â±ï¸ Ø§Ù„Ù…Ø¯Ø© Ø§Ù„Ù…Ù‚ØªØ±Ø­Ø© (Ø£ÙŠØ§Ù…)
              </label>
              <input id="id_proposed_duration_days" type="number" name="proposed_duration_days"
                     class="input"
                     min="1" step="1" required
                     value="{{ form.proposed_duration_days.value|default:form.proposed_duration_days.initial|default:'7' }}">
              {% if form.proposed_duration_days.errors %}
                <div class="field-error">
                  {% for e in form.proposed_duration_days.errors %}<div>â€¢ {{ e }}</div>{% endfor %}
                </div>
              {% endif %}
              <p class="field-hint">Ø§Ø®ØªØ± Ù‚ÙŠÙ…Ø© ÙˆØ§Ù‚Ø¹ÙŠØ© Ù„ØªÙ†ÙÙŠØ° Ø§Ù„Ø¹Ù…Ù„</p>
            </div>

            {# Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ù…Ù‚ØªØ±Ø­ #}
            <div class="form-field">
              <label for="id_proposed_price" class="form-label">
                ğŸ’° Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ù…Ù‚ØªØ±Ø­
              </label>
              <input id="id_proposed_price" type="number" name="proposed_price"
                     class="input"
                     inputmode="decimal" min="0" step="0.01" required
                     value="{{ form.proposed_price.value|default:form.proposed_price.initial|default:'0' }}">
              {% if form.proposed_price.errors %}
                <div class="field-error">
                  {% for e in form.proposed_price.errors %}<div>â€¢ {{ e }}</div>{% endfor %}
                </div>
              {% endif %}
              <div class="field-hint-row">
                <span class="field-hint">Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø¯Ø®Ù„:</span>
                <span id="pricePreview" class="value-strong">â€”</span>
              </div>

              {# ===== Ø¨Ø·Ø§Ù‚Ø© ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø³Ø¹Ø± (ØªÙØ­Ø¯Ù‘ÙØ« ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§) ===== #}
              <div class="price-details profile-section"
                   data-platform-fee-percent="{{ platform_fee_percent|default:form.instance.platform_fee_percent|default_if_none:'' }}"
                   data-vat-percent="{{ vat_percent|default:form.instance.vat_percent|default_if_none:'' }}"
                   style="background: var(--dark-50); margin-top: 1rem;">
                <div class="card-section-title">ğŸ§® ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø³Ø¹Ø±</div>
                <div class="price-grid">
                  <div class="price-item" title="ØµØ§ÙÙŠ Ø§Ù„Ù…ÙˆØ¸Ù Ø¨Ø¹Ø¯ Ø®ØµÙ… Ø§Ù„Ø¹Ù…ÙˆÙ„Ø©">
                    <span class="price-label">ğŸ‘¤ ØµØ§ÙÙŠ Ø§Ù„Ù…ÙˆØ¸Ù:</span>
                    <span class="price-value">
                      <span id="netForEmployee"
                            data-value="{{ form.instance.net_for_employee|default_if_none:'' }}">
                        {{ form.instance.net_for_employee|default_if_none:'â€”' }}
                      </span>
                      <span class="currency">Ø±.Ø³</span>
                    </span>
                    <span class="field-hint" style="font-size: 0.85em; color: #0e7490; margin-right: 8px;">
                      Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ø°ÙŠ Ø³ÙŠØ­ØµÙ„ Ø¹Ù„ÙŠÙ‡ Ø§Ù„Ù…ÙˆØ¸Ù ÙØ¹Ù„ÙŠÙ‹Ø§
                    </span>
                  </div>

                  <div class="price-item" title="Ù‚ÙŠÙ…Ø© Ø¹Ù…ÙˆÙ„Ø© Ø§Ù„Ù…Ù†ØµØ© Ù…Ù† Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ù…Ù‚ØªØ±Ø­">
                    <span class="price-label">
                      ğŸ’¸ Ø¹Ù…ÙˆÙ„Ø© Ø§Ù„Ù…Ù†ØµØ©
                      <span id="platformFeePercentDisplay">
                        ({{ platform_fee_percent|default:form.instance.platform_fee_percent|default_if_none:'0' }}%)
                      </span>:
                    </span>
                    <span class="price-value">
                      <span id="platformFee"
                            data-value="{{ form.instance.platform_fee_amount|default_if_none:'' }}">
                        {{ form.instance.platform_fee_amount|default_if_none:'â€”' }}
                      </span>
                      <span class="currency">Ø±.Ø³</span>
                    </span>
                  </div>

                  <div class="price-item" title="Ù‚ÙŠÙ…Ø© Ø§Ù„Ø¶Ø±ÙŠØ¨Ø© Ø§Ù„Ù…Ø¶Ø§ÙØ© Ø¹Ù„Ù‰ Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ù…Ù‚ØªØ±Ø­ ÙÙ‚Ø·">
                    <span class="price-label">
                      ğŸ§¾ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©
                      <span id="vatPercentDisplay">
                        ({{ vat_percent|default:form.instance.vat_percent|default_if_none:'0' }}%)
                      </span>:
                    </span>
                    <span class="price-value">
                      <span id="vatValue"
                            data-value="{{ form.instance.vat_amount|default_if_none:'' }}">
                        {{ form.instance.vat_amount|default_if_none:'â€”' }}
                      </span>
                      <span class="currency">Ø±.Ø³</span>
                    </span>
                  </div>

                  <div class="price-item highlight" title="Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ Ø§Ù„Ø°ÙŠ Ø³ÙŠØ¯ÙØ¹Ù‡ Ø§Ù„Ø¹Ù…ÙŠÙ„ (ÙŠØ´Ù…Ù„ Ø§Ù„Ø¹Ù…ÙˆÙ„Ø© ÙˆØ§Ù„Ø¶Ø±ÙŠØ¨Ø©)">
                    <span class="price-label">ğŸ’¼ Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¹Ù…ÙŠÙ„:</span>
                    <span class="price-value">
                      <span id="totalForClient"
                            data-value="{{ form.instance.client_total_amount|default_if_none:'' }}">
                        {{ form.instance.client_total_amount|default_if_none:'â€”' }}
                      </span>
                      <span class="currency">Ø±.Ø³</span>
                    </span>
                    <span class="field-hint" style="font-size: 0.9em; color: #166534; margin-right: 8px;">
                      ÙŠØ´Ù…Ù„ Ø¹Ù…ÙˆÙ„Ø© Ø§Ù„Ù…Ù†ØµØ© ÙˆØ§Ù„Ø¶Ø±ÙŠØ¨Ø©
                    </span>
                  </div>
                </div>
              </div>

            </div>
          </div>

          {# ===== Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ ===== #}
          <div class="form-actions employee-actions" style="margin-top: 2rem; padding-top: 1.5rem; border-top: 1px solid var(--dark-200);">
            <button id="submitBtn" type="submit" class="btn btn-primary">
              Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¹Ø±Ø¶
            </button>
            <a href="{% url 'marketplace:new_requests' %}" class="btn btn-outline">
              Ø¥Ù„ØºØ§Ø¡
            </a>
          </div>

          <p class="form-note" style="text-align: center; color: var(--dark-500); font-size: 0.875rem; margin-top: 1rem;">
            Ø¥Ø°Ø§ Ù„Ù… ÙŠÙ†ØªÙ‚Ù„ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø¨Ø¹Ø¯ Ø§Ù„Ø¶ØºØ·ØŒ Ø±Ø§Ø¬Ø¹ Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ù…ØªØµÙÙ‘Ø­ Ø£Ø¹Ù„Ù‰ Ø§Ù„Ø­Ù‚ÙˆÙ„ (Ù‚Ø¯ ÙŠÙ…Ù†Ø¹ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ù„Ø¹Ø¯Ù… Ø§ÙƒØªÙ…Ø§Ù„ Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª).
          </p>
        </form>
      </div>
    </div>

  </div>
</section>
{% endblock %}

{% block extra_scripts %}
  {{ block.super }}
  <script>
  (function () {
    if (typeof initScrollReveal === 'function') {
      initScrollReveal();
    }
    if (typeof initButtonEffects === 'function') {
      initButtonEffects();
    }

    var form = document.getElementById('offerForm');
    var ta = document.getElementById('id_note');
    var cnt = document.getElementById('descCount');
    var btn = document.getElementById('submitBtn');
    var priceInput = document.getElementById('id_proposed_price');
    var pricePreview = document.getElementById('pricePreview');

    // Ø¹Ù†Ø§ØµØ± ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø³Ø¹Ø±
    var priceBox = document.querySelector('.price-details');
    var netForEmployee = document.getElementById('netForEmployee');
    var platformFee = document.getElementById('platformFee');
    var vatValue = document.getElementById('vatValue');
    var totalForClient = document.getElementById('totalForClient');

    var platformFeePercentDisplay = document.getElementById('platformFeePercentDisplay');
    var vatPercentDisplay = document.getElementById('vatPercentDisplay');

    // Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù†Ø³Ø¨ Ù…Ù† Ø§Ù„Ù€ data-attributes Ø£Ùˆ Ù…Ù† Ø§Ù„Ù†Øµ Ø§Ù„Ù…Ø¹Ø±ÙˆØ¶
    function normalizePercent(raw) {
      if (!raw) return 0;
      raw = String(raw).replace(',', '.').trim();
      var num = parseFloat(raw);
      if (!isFinite(num) || isNaN(num)) return 0;
      // Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ù…Ø«Ù„ 10 Ø§Ø¹ØªØ¨Ø±Ù‡Ø§ 10%ØŒ ÙˆØ¥Ø°Ø§ 0.1 Ø§Ø¹ØªØ¨Ø±Ù‡Ø§ ÙØ¹Ù„ÙŠØ§Ù‹ 10%
      if (num > 1) {
        return num / 100.0;
      }
      return num;
    }

    var platformFeePercentRaw = priceBox ? priceBox.getAttribute('data-platform-fee-percent') : null;
    var vatPercentRaw = priceBox ? priceBox.getAttribute('data-vat-percent') : null;

    var platformFeePercent = normalizePercent(platformFeePercentRaw);
    var vatPercent = normalizePercent(vatPercentRaw);

    // Ù„Ùˆ Ø§Ù„Ù†Ø³Ø¨ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø© ÙÙŠ Ø§Ù„Ù€ data Ù†Ø­Ø§ÙˆÙ„ Ù†Ù‚Ø±Ø£ Ù…Ù† Ø§Ù„Ù†Øµ Ø¨ÙŠÙ† Ø§Ù„Ø£Ù‚ÙˆØ§Ø³
    if (!platformFeePercent && platformFeePercentDisplay) {
      var txt = platformFeePercentDisplay.textContent || '';
      var m = txt.match(/([\d.,]+)/);
      if (m) {
        platformFeePercent = normalizePercent(m[1]);
      }
    }
    if (!vatPercent && vatPercentDisplay) {
      var txt2 = vatPercentDisplay.textContent || '';
      var m2 = txt2.match(/([\d.,]+)/);
      if (m2) {
        vatPercent = normalizePercent(m2[1]);
      }
    }

    // Ø¹Ø¯Ø§Ø¯ Ø§Ù„ÙˆØµÙ
    function updateCount() {
      if (!ta || !cnt) return;
      var max = parseInt(ta.getAttribute('maxlength')) || 2000;
      var len = (ta.value || '').length;
      cnt.textContent = len + '/' + max;

      if (len > max * 0.9) {
        cnt.style.color = '#ef4444';
      } else if (len > max * 0.8) {
        cnt.style.color = 'var(--secondary-600)';
      } else {
        cnt.style.color = 'var(--dark-500)';
      }
    }

    if (ta) {
      updateCount();
      ta.addEventListener('input', updateCount);
      ta.addEventListener('focus', function() {
        this.style.borderColor = 'var(--primary-500)';
        this.style.boxShadow = '0 0 0 3px rgba(34, 197, 94, 0.1)';
      });
      ta.addEventListener('blur', function() {
        this.style.borderColor = '';
        this.style.boxShadow = '';
      });
    }

    // Ø­Ø³Ø§Ø¨Ø§Øª Ø§Ù„Ø³Ø¹Ø± Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠØ©
    function formatAmount(val) {
      if (!isFinite(val) || isNaN(val)) {
        return 'â€”';
      }
      return val.toFixed(2);
    }

    function updatePricePreview() {
      if (!priceInput || !pricePreview) return;
      var raw = priceInput.value;
      if (!raw) {
        pricePreview.textContent = 'â€”';
        return;
      }
      var num = parseFloat(raw);
      if (!isFinite(num) || isNaN(num) || num < 0) {
        pricePreview.textContent = 'â€”';
        return;
      }
      pricePreview.textContent = formatAmount(num) + ' Ø±.Ø³';
    }

    function updatePriceBreakdown() {
      if (!priceInput || !priceBox) return;

      var raw = priceInput.value;
      var P = parseFloat(String(raw).replace(',', '.'));
      if (!isFinite(P) || isNaN(P) || P <= 0) {
        if (netForEmployee) netForEmployee.textContent = 'â€”';
        if (platformFee) platformFee.textContent = 'â€”';
        if (vatValue) vatValue.textContent = 'â€”';
        if (totalForClient) totalForClient.textContent = 'â€”';
        return;
      }

      // Ø¹Ù…ÙˆÙ„Ø© Ø§Ù„Ù…Ù†ØµØ© ÙˆØ§Ù„Ø¶Ø±ÙŠØ¨Ø© Ø­Ø³Ø¨ Ø§Ù„Ø§ØªÙØ§Ù‚:
      // ØµØ§ÙÙŠ Ø§Ù„Ù…ÙˆØ¸Ù = P - Ø¹Ù…ÙˆÙ„Ø© Ø§Ù„Ù…Ù†ØµØ©
      // Ø§Ù„Ø¶Ø±ÙŠØ¨Ø© Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ ÙÙ‚Ø·
      var fee = +(P * platformFeePercent).toFixed(2);
      var vat = +(P * vatPercent).toFixed(2);
      var net = +(P - fee).toFixed(2);
      var total = +(P + fee + vat).toFixed(2);

      if (netForEmployee) netForEmployee.textContent = formatAmount(net);
      if (platformFee) platformFee.textContent = formatAmount(fee);
      if (vatValue) vatValue.textContent = formatAmount(vat);
      if (totalForClient) totalForClient.textContent = formatAmount(total);
    }

    if (priceInput) {
      updatePricePreview();
      updatePriceBreakdown();
      priceInput.addEventListener('input', function () {
        updatePricePreview();
        updatePriceBreakdown();
      });
      priceInput.addEventListener('blur', function () {
        updatePricePreview();
        updatePriceBreakdown();
      });
    }

    // ØªØ­Ù‚Ù‚Ø§Øª Ù‚Ø¨Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„
    if (form && btn) {
      form.addEventListener('submit', function (e) {
        var noteValue = ta ? ta.value.trim() : '';
        var priceValue = priceInput ? priceInput.value : '';

        if (noteValue.length < 10) {
          e.preventDefault();
          if (typeof showToast === 'function') {
            showToast('ÙŠØ±Ø¬Ù‰ ÙƒØªØ§Ø¨Ø© ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¹Ø±Ø¶ (10 Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„)', 'error');
          } else {
            alert('ÙŠØ±Ø¬Ù‰ ÙƒØªØ§Ø¨Ø© ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¹Ø±Ø¶ (10 Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„)');
          }
          if (ta) ta.focus();
          return false;
        }

        if (!priceValue || parseFloat(priceValue) <= 0) {
          e.preventDefault();
          if (typeof showToast === 'function') {
            showToast('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø³Ø¹Ø± ØµØ­ÙŠØ­ Ø£ÙƒØ¨Ø± Ù…Ù† ØµÙØ±', 'error');
          } else {
            alert('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø³Ø¹Ø± ØµØ­ÙŠØ­ Ø£ÙƒØ¨Ø± Ù…Ù† ØµÙØ±');
          }
          if (priceInput) priceInput.focus();
          return false;
        }

        btn.disabled = true;
        btn.innerHTML = 'â³ Ø¬Ø§Ø±ÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¹Ø±Ø¶...';

        if (typeof animateButtonClick === 'function') {
          animateButtonClick(btn);
        }

        if (typeof showToast === 'function') {
          showToast('Ø¬Ø§Ø±ÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¹Ø±Ø¶...', 'info');
        }
      });
    }

    // ØªÙ„ÙˆÙŠÙ† Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø¹Ø¨Ø£Ø©
    document.querySelectorAll('input, textarea').forEach(function (field) {
      field.addEventListener('input', function() {
        if (this.value && this.value.length > 0) {
          this.style.background = 'var(--primary-50)';
        } else {
          this.style.background = '';
        }
      });
    });

  })();
  </script>

  <style>
  .offer-create-page .profile-section {
    transition: transform 0.2s ease, box-shadow 0.2s ease;
  }

  .offer-create-page .profile-section:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 25px rgba(15, 23, 42, 0.12);
  }

  .offer-create-page .input {
    width: 100%;
    padding: 0.75rem 1rem;
    border: 1px solid var(--dark-300);
    border-radius: var(--radius-lg);
    background: var(--white);
    font-family: inherit;
    font-size: 1rem;
    transition: var(--transition);
  }

  .offer-create-page .input:focus {
    outline: none;
    border-color: var(--primary-500);
    box-shadow: 0 0 0 3px rgba(34, 197, 94, 0.1);
  }

  .offer-create-page .textarea-large {
    min-height: 140px;
    resize: vertical;
    line-height: 1.6;
  }

  .offer-create-page .field-error {
    color: #ef4444;
    font-size: 0.875rem;
    margin-top: 0.25rem;
  }

  .offer-create-page .field-hint {
    color: var(--dark-500);
    font-size: 0.875rem;
    margin-top: 0.25rem;
  }

  .offer-create-page .field-hint-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: 0.5rem;
  }

  .offer-create-page .field-counter {
    color: var(--dark-500);
    font-size: 0.875rem;
  }

  .offer-create-page .value-strong {
    color: var(--primary-600);
    font-weight: 600;
  }

  .offer-create-page .form-grid-2 {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1.5rem;
  }

  .offer-create-page .price-details {
    margin-top: 1rem;
  }

  .offer-create-page .price-grid {
    margin-top: 0.75rem;
  }

  .offer-create-page .price-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.5rem 0;
    border-bottom: 1px solid var(--dark-200);
  }

  .offer-create-page .price-item:last-child {
    border-bottom: none;
  }

  .offer-create-page .price-item.highlight {
    background: var(--primary-50);
    margin: 0 -1rem;
    padding: 0.75rem 1rem;
    border-radius: var(--radius);
    border: none;
  }

  .offer-create-page .price-label {
    color: var(--dark-600);
    font-size: 0.9rem;
  }

  .offer-create-page .price-value {
    color: var(--dark-900);
    font-weight: 600;
    font-size: 0.9rem;
  }

  .offer-create-page .currency {
    margin-right: 4px;
    font-size: 0.85rem;
    color: var(--dark-500);
  }

  .offer-create-page .form-actions {
    display: flex;
    gap: 1rem;
    justify-content: flex-start;
  }

  .offer-create-page .form-note {
    text-align: center;
    color: var(--dark-500);
    font-size: 0.875rem;
  }

  @media (max-width: 768px) {
    .offer-create-page .form-grid-2 {
      grid-template-columns: 1fr;
    }
    
    .offer-create-page .form-actions {
      flex-direction: column;
    }
    
    .offer-create-page .form-actions .btn {
      width: 100%;
    }
    
    .offer-create-page .price-item {
      flex-direction: column;
      align-items: flex-start;
      gap: 0.25rem;
    }
  }
  </style>
{% endblock %}
