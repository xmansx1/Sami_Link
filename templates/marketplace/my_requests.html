{% extends "base.html" %}
{% block title %}Ø·Ù„Ø¨Ø§ØªÙŠ{% endblock %}
{% block content %}

<section class="page-section my-requests-page">
  <div class="container">
    
    {# ===== Ø§Ù„Ø¹Ù†ÙˆØ§Ù† ÙˆØ´Ø±ÙŠØ· Ø§Ù„Ø£Ø¯ÙˆØ§Øª ===== #}
    <div class="section-header" style="text-align: right; margin-bottom: 2rem;">
      <div class="section-badge">
        ğŸ“‹ Ø·Ù„Ø¨Ø§ØªÙŠ
      </div>
      <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 1rem;">
        <h1 class="section-title" style="margin: 0;">
          Ø·Ù„Ø¨Ø§ØªÙŠ
        </h1>
        <a href="{% url 'marketplace:request_create' %}"
           class="btn btn-primary">
          â• Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯
        </a>
      </div>
    </div>

    {# ===== ÙÙ„Ø§ØªØ± Ø§Ù„Ø¨Ø­Ø« / Ø§Ù„ÙØ±Ø² ===== #}
    <div class="profile-section" style="margin-bottom: 2rem;">
      <form method="get" class="filter-form">
        <div class="form-grid-4" style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem;">
          <div class="form-field">
            <label class="form-label">ğŸ” Ø¨Ø­Ø«</label>
            <input type="text" name="q" value="{{ request.GET.q }}" class="input" placeholder="Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø·Ù„Ø¨ Ø£Ùˆ Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…ÙØªØ§Ø­ÙŠØ©">
          </div>

          <div class="form-field">
            <label class="form-label">ğŸ“Š Ø§Ù„Ø­Ø§Ù„Ø©</label>
            <select name="status" class="input">
              <option value="">Ø§Ù„ÙƒÙ„</option>
              <option value="new" {% if request.GET.status == 'new' %}selected{% endif %}>Ø¬Ø¯ÙŠØ¯</option>
              <option value="offer_selected" {% if request.GET.status == 'offer_selected' %}selected{% endif %}>ØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ø¹Ø±Ø¶</option>
              <option value="agreement_pending" {% if request.GET.status == 'agreement_pending' %}selected{% endif %}>Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§ØªÙØ§Ù‚ÙŠØ©</option>
              <option value="in_progress" {% if request.GET.status == 'in_progress' %}selected{% endif %}>Ù‚ÙŠØ¯ Ø§Ù„ØªÙ†ÙÙŠØ°</option>
              <option value="completed" {% if request.GET.status == 'completed' %}selected{% endif %}>Ù…ÙƒØªÙ…Ù„</option>
              <option value="disputed" {% if request.GET.status == 'disputed' %}selected{% endif %}>Ù†Ø²Ø§Ø¹</option>
              <option value="cancelled" {% if request.GET.status == 'cancelled' %}selected{% endif %}>Ù…Ù„ØºÙŠ</option>
            </select>
          </div>

          <div class="form-field">
            <label class="form-label">ğŸ”„ Ø§Ù„ØªØ±ØªÙŠØ¨</label>
            <select name="sort" class="input">
              <option value="-created_at" {% if request.GET.sort == '-created_at' or not request.GET.sort %}selected{% endif %}>Ø§Ù„Ø£Ø­Ø¯Ø« Ø£ÙˆÙ„Ø§Ù‹</option>
              <option value="created_at" {% if request.GET.sort == 'created_at' %}selected{% endif %}>Ø§Ù„Ø£Ù‚Ø¯Ù… Ø£ÙˆÙ„Ø§Ù‹</option>
              <option value="-updated_at" {% if request.GET.sort == '-updated_at' %}selected{% endif %}>Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«</option>
            </select>
          </div>

          <div class="form-field" style="display: flex; align-items: flex-end; gap: 0.5rem;">
            <button class="btn btn-primary" style="flex: 1;">
              ğŸ” ØªØ·Ø¨ÙŠÙ‚
            </button>
            <a href="." class="btn btn-outline">
              ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø·
            </a>
          </div>
        </div>
      </form>
    </div>

    {# ===== Ø¹Ø±Ø¶ Ù‡Ø¬ÙŠÙ†: Ø¨Ø·Ø§Ù‚Ø§Øª Ø¹Ù„Ù‰ Ø§Ù„Ø¬ÙˆØ§Ù„ + Ø¬Ø¯ÙˆÙ„ Ø¹Ù„Ù‰ Ø³Ø·Ø­ Ø§Ù„Ù…ÙƒØªØ¨ ===== #}
    {% if requests %}

      {# --- Ø¨Ø·Ø§Ù‚Ø§Øª (Ø¬ÙˆØ§Ù„) --- #}
      <div class="mobile-cards employees-grid">
        {% for r in requests %}
          <div class="employee-card scroll-reveal">
            <div class="status-indicator 
                      {% if r.status == 'new' %}status-new
                      {% elif r.status == 'offer_selected' %}status-offer-selected
                      {% elif r.status == 'agreement_pending' %}status-agreement
                      {% elif r.status == 'in_progress' %}status-in-progress
                      {% elif r.status == 'completed' %}status-completed
                      {% elif r.status == 'disputed' %}status-disputed
                      {% elif r.status == 'cancelled' %}status-cancelled
                      {% else %}status-default{% endif %}">
            </div>

            <div class="employee-card-header">
              <div class="employee-basic-info">
                <div class="employee-name">
                  {{ r.title|default:"â€”" }}
                </div>
                <div class="employee-title">
                  <span class="badge 
                             {% if r.status == 'new' %}badge-default
                             {% elif r.status == 'offer_selected' %}badge-pending
                             {% elif r.status == 'agreement_pending' %}badge-pending
                             {% elif r.status == 'in_progress' %}badge-pending
                             {% elif r.status == 'completed' %}badge-verified
                             {% elif r.status == 'disputed' %}badge-rejected
                             {% elif r.status == 'cancelled' %}badge-rejected
                             {% else %}badge-default{% endif %}">
                    {{ r.get_status_display|default:r.status }}
                  </span>
                </div>
                <div class="employee-location">
                  <span>#{{ r.pk }}</span>
                </div>
              </div>
            </div>

            {# Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø¯Ø© ÙˆØ§Ù„Ø³Ø¹Ø± #}
            <div class="employee-stats">
              <div class="employee-stat">
                <span class="stat-number">
                  {% if r.selected_offer %}
                    {{ r.selected_offer.proposed_duration_days|default:"â€”" }}
                  {% else %}
                    {{ r.estimated_duration_days|default:"â€”" }}
                  {% endif %}
                </span>
                <span class="stat-label">Ø£ÙŠØ§Ù…</span>
              </div>
              <div class="employee-stat">
                <span class="stat-number">
                  {% if r.selected_offer %}
                    {{ r.selected_offer.proposed_price|default:"â€”" }}
                  {% else %}
                    {{ r.estimated_price|default:"â€”" }}
                  {% endif %}
                </span>
                <span class="stat-label">Ø±ÙŠØ§Ù„</span>
              </div>
              <div class="employee-stat">
                <span class="stat-number">{{ r.created_at|date:"d/m" }}</span>
                <span class="stat-label">Ø§Ù„ØªØ§Ø±ÙŠØ®</span>
              </div>
            </div>

            {# Ø§Ù„Ù…ÙˆØ¸Ù Ø§Ù„Ù…Ø³Ù†Ø¯ #}
            <div class="employee-skills">
              <div class="skills-title">Ø§Ù„Ù…ÙˆØ¸Ù Ø§Ù„Ù…Ø³Ù†Ø¯:</div>
              <div class="skills-tags">
                <span class="skill-tag-small">
                  {% if r.assigned_employee %}
                    ğŸ‘¤ {{ r.assigned_employee }}
                  {% elif r.selected_offer %}
                    ğŸ‘¤ {{ r.selected_offer.employee }}
                  {% else %}
                    â³ Ù„Ù… ÙŠÙØ³Ù†Ø¯ Ø¨Ø¹Ø¯
                  {% endif %}
                </span>
              </div>
            </div>

            {# ØªÙØ§ØµÙŠÙ„ Ù…Ø®ØªØµØ±Ø© #}
            {% if r.details %}
              <div class="employee-skills">
                <div class="skills-title">ØªÙØ§ØµÙŠÙ„:</div>
                <div class="skills-tags">
                  <div class="request-preview">
                    {{ r.details|truncatewords:15 }}
                  </div>
                </div>
              </div>
            {% endif %}

            {# Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª #}
            <div class="employee-actions">
              <a href="{% url 'marketplace:request_detail' r.pk %}"
                 class="btn-view-profile">
                ğŸ‘ï¸ Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ§ØµÙŠÙ„
              </a>

              {% if r.status == 'offer_selected' or r.status == 'agreement_pending' %}
                <a href="{% url 'agreements:open_by_request' r.pk %}"
                   class="btn-contact"
                   title="Ø§Ù„Ø§ØªÙØ§Ù‚ÙŠØ©">
                  ğŸ“ Ø§ØªÙØ§Ù‚ÙŠØ©
                </a>
              {% endif %}
            </div>

            {# Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© #}
            <div class="availability" style="margin-top: 1rem; padding: 0.5rem; background: var(--dark-50); border-radius: var(--radius);">
              <span class="availability-dot 
                         {% if r.status == 'completed' %}available
                         {% elif r.status == 'cancelled' %}offline
                         {% else %}busy{% endif %}"></span>
              <span style="font-size: 0.8rem; color: var(--dark-500);">
                {{ r.created_at|date:"Y-m-d H:i" }}
                {% if r.updated_at %} â€¢ Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«: {{ r.updated_at|date:"Y-m-d H:i" }}{% endif %}
              </span>
            </div>
          </div>
        {% endfor %}
      </div>

      {# --- Ø¬Ø¯ÙˆÙ„ (Ø³Ø·Ø­ Ø§Ù„Ù…ÙƒØªØ¨) --- #}
      <div class="desktop-table profile-section">
        <div class="table-wrapper">
          <table class="table table-clean">
            <thead>
              <tr>
                <th>#</th>
                <th>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</th>
                <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
                <th>Ø§Ù„Ù…Ø¯Ø©/Ø§Ù„Ù…Ø¨Ù„Øº</th>
                <th>Ø§Ù„Ù…ÙˆØ¸Ù</th>
                <th>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡</th>
                <th>Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«</th>
                <th>Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
              </tr>
            </thead>
            <tbody>
              {% for r in requests %}
                <tr class="scroll-reveal">
                  <td class="text-muted">#{{ r.pk }}</td>

                  <td>
                    <div class="table-cell-main">
                      <div class="table-cell-title">{{ r.title|default:"â€”" }}</div>
                      {% if r.details %}
                        <div class="table-cell-subtitle">{{ r.details|truncatewords:10 }}</div>
                      {% endif %}
                    </div>
                  </td>

                  <td>
                    <span class="badge 
                               {% if r.status == 'new' %}badge-default
                               {% elif r.status == 'offer_selected' %}badge-pending
                               {% elif r.status == 'agreement_pending' %}badge-pending
                               {% elif r.status == 'in_progress' %}badge-pending
                               {% elif r.status == 'completed' %}badge-verified
                               {% elif r.status == 'disputed' %}badge-rejected
                               {% elif r.status == 'cancelled' %}badge-rejected
                               {% else %}badge-default{% endif %}">
                      {{ r.get_status_display|default:r.status }}
                    </span>
                  </td>

                  <td>
                    <div class="price-duration-info">
                      <div class="info-item">
                        <span class="info-label">Ø§Ù„Ù…Ø¯Ø©:</span>
                        <span class="info-value">
                          {% if r.selected_offer %}
                            {{ r.selected_offer.proposed_duration_days|default:"â€”" }} ÙŠÙˆÙ…
                          {% else %}
                            {{ r.estimated_duration_days|default:"â€”" }} ÙŠÙˆÙ…
                          {% endif %}
                        </span>
                      </div>
                      <div class="info-item">
                        <span class="info-label">Ø§Ù„Ù…Ø¨Ù„Øº:</span>
                        <span class="info-value">
                          {% if r.selected_offer %}
                            {{ r.selected_offer.proposed_price|default:"â€”" }} Ø±ÙŠØ§Ù„
                          {% else %}
                            {{ r.estimated_price|default:"â€”" }} Ø±ÙŠØ§Ù„
                          {% endif %}
                        </span>
                      </div>
                    </div>
                  </td>

                  <td>
                    <div class="employee-info">
                      {% if r.assigned_employee %}
                        ğŸ‘¤ {{ r.assigned_employee }}
                      {% elif r.selected_offer %}
                        ğŸ‘¤ {{ r.selected_offer.employee }}
                      {% else %}
                        <span class="text-muted">â€”</span>
                      {% endif %}
                    </div>
                  </td>

                  <td class="text-muted">{{ r.created_at|date:"Y-m-d H:i" }}</td>
                  <td class="text-muted">{% if r.updated_at %}{{ r.updated_at|date:"Y-m-d H:i" }}{% else %}â€”{% endif %}</td>

                  <td>
                    <div class="table-actions">
                      <a href="{% url 'marketplace:request_detail' r.pk %}"
                         class="btn btn-outline btn-sm">
                        Ø¹Ø±Ø¶
                      </a>

                      {% if r.status == 'offer_selected' or r.status == 'agreement_pending' %}
                        <a href="{% url 'agreements:open_by_request' r.pk %}"
                           class="btn btn-secondary btn-sm">
                          Ø§Ù„Ø§ØªÙØ§Ù‚ÙŠØ©
                        </a>
                      {% endif %}
                    </div>
                  </td>
                </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>

      {# ===== ØªØ±Ù‚ÙŠÙ… Ø§Ù„ØµÙØ­Ø§Øª ===== #}
      {% if is_paginated %}
        <div class="pagination profile-section" style="text-align: center; padding: 1.5rem;">
          <div class="pagination-inner employee-actions">
            {% if page_obj.has_previous %}
              <a class="btn btn-outline btn-sm"
                 href="?page={{ page_obj.previous_page_number }}{% if request.GET.q %}&q={{ request.GET.q }}{% endif %}{% if request.GET.status %}&status={{ request.GET.status }}{% endif %}{% if request.GET.sort %}&sort={{ request.GET.sort }}{% endif %}">
                â€¹ Ø§Ù„Ø³Ø§Ø¨Ù‚
              </a>
            {% else %}
              <span class="btn btn-outline btn-sm" style="opacity: 0.5; cursor: not-allowed;">â€¹ Ø§Ù„Ø³Ø§Ø¨Ù‚</span>
            {% endif %}

            <span class="pagination-info badge badge-default">
              Ø§Ù„ØµÙØ­Ø© {{ page_obj.number }} Ù…Ù† {{ page_obj.paginator.num_pages }}
            </span>

            {% if page_obj.has_next %}
              <a class="btn btn-outline btn-sm"
                 href="?page={{ page_obj.next_page_number }}{% if request.GET.q %}&q={{ request.GET.q }}{% endif %}{% if request.GET.status %}&status={{ request.GET.status }}{% endif %}{% if request.GET.sort %}&sort={{ request.GET.sort }}{% endif %}">
                Ø§Ù„ØªØ§Ù„ÙŠ â€º
              </a>
            {% else %}
              <span class="btn btn-outline btn-sm" style="opacity: 0.5; cursor: not-allowed;">Ø§Ù„ØªØ§Ù„ÙŠ â€º</span>
            {% endif %}
          </div>
        </div>
      {% endif %}

    {% else %}
      {# ===== Ø­Ø§Ù„Ø© Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Ø·Ù„Ø¨Ø§Øª ===== #}
      <div class="profile-section text-center" style="padding: 4rem 2rem; background: var(--dark-50);">
        <div class="text-6xl mb-4 opacity-40" aria-hidden="true">ğŸ“</div>
        <h3 class="card-section-title" style="margin-bottom: 1rem;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª Ø¨Ø¹Ø¯</h3>
        <p class="card-section-note" style="font-size: 1rem; margin-bottom: 2rem;">
          Ø§Ø¨Ø¯Ø£ Ø¨Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯ ÙˆØ­Ø¯Ø¯ Ø§Ù„ØªÙØ§ØµÙŠÙ„ Ø§Ù„ØªÙŠ ØªØ±ØºØ¨ Ø¨Ù‡Ø§.
        </p>
        <a href="{% url 'marketplace:request_create' %}"
           class="btn btn-primary">
          â• Ø¥Ù†Ø´Ø§Ø¡ Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯
        </a>
      </div>
    {% endif %}

    {# ===== ØªÙ„Ù…ÙŠØ­Ø§Øª Ø§Ù„Ø­Ø§Ù„Ø© ===== #}
    <div class="profile-section" style="background: var(--dark-50); margin-top: 2rem;">
      <div class="card-section-title">ğŸ”– Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø­Ø§Ù„Ø§Øª</div>
      <div class="status-guide" style="display: flex; flex-wrap: wrap; gap: 0.5rem; margin-top: 1rem;">
        <span class="badge badge-default">Ø¬Ø¯ÙŠØ¯</span>
        <span class="badge badge-pending">ØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ø¹Ø±Ø¶</span>
        <span class="badge badge-pending">Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§ØªÙØ§Ù‚ÙŠØ©</span>
        <span class="badge badge-pending">Ù‚ÙŠØ¯ Ø§Ù„ØªÙ†ÙÙŠØ°</span>
        <span class="badge badge-verified">Ù…ÙƒØªÙ…Ù„</span>
        <span class="badge badge-rejected">Ù†Ø²Ø§Ø¹</span>
        <span class="badge badge-rejected">Ù…Ù„ØºÙŠ</span>
      </div>
    </div>

  </div>
</section>

{% endblock %}

{% block extra_scripts %}
  {{ block.super }}
  <script>
  (function () {
    // ØªÙ‡ÙŠØ¦Ø© ØªØ£Ø«ÙŠØ±Ø§Øª Ø§Ù„ØªÙ…Ø±ÙŠØ±
    if (typeof initScrollReveal === 'function') {
      initScrollReveal();
    }

    // ØªØ¨Ø¯ÙŠÙ„ Ø¨ÙŠÙ† Ø§Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø¬Ø¯ÙˆÙ„ÙŠ ÙˆØ§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª Ø­Ø³Ø¨ Ø­Ø¬Ù… Ø§Ù„Ø´Ø§Ø´Ø©
    function toggleView() {
      const mobileCards = document.querySelector('.mobile-cards');
      const desktopTable = document.querySelector('.desktop-table');
      
      if (window.innerWidth < 768) {
        if (mobileCards) mobileCards.style.display = 'grid';
        if (desktopTable) desktopTable.style.display = 'none';
      } else {
        if (mobileCards) mobileCards.style.display = 'none';
        if (desktopTable) desktopTable.style.display = 'block';
      }
    }

    // Ø§Ù„ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø£ÙˆÙ„ÙŠØ©
    toggleView();
    window.addEventListener('resize', toggleView);

    // ØªØ£Ø«ÙŠØ±Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© Ù„Ù„Ø¨Ø·Ø§Ù‚Ø§Øª
    if (typeof initEmployeeCards === 'function') {
      initEmployeeCards();
    }

    // ØªØ£Ø«ÙŠØ±Ø§Øª Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø²Ø±Ø§Ø±
    document.querySelectorAll('.btn').forEach(button => {
      button.addEventListener('click', function() {
        if (typeof animateButtonClick === 'function') {
          animateButtonClick(this);
        }
      });
    });

    // ØªØ­Ø³ÙŠÙ† ØªØ¬Ø±Ø¨Ø© Ø§Ù„ÙÙ„Ø§ØªØ±
    const filterForm = document.querySelector('.filter-form');
    if (filterForm) {
      const inputs = filterForm.querySelectorAll('input, select');
      inputs.forEach(input => {
        input.addEventListener('change', function() {
          // Ø¥Ø¶Ø§ÙØ© ØªØ£Ø«ÙŠØ± Ø¹Ù†Ø¯ Ø§Ù„ØªØºÙŠÙŠØ±
          this.style.borderColor = 'var(--primary-500)';
          setTimeout(() => {
            this.style.borderColor = '';
          }, 500);
        });
        
        input.addEventListener('focus', function() {
          this.style.boxShadow = '0 0 0 3px rgba(34, 197, 94, 0.1)';
        });
        
        input.addEventListener('blur', function() {
          this.style.boxShadow = '';
        });
      });
    }

    // ØªØ£Ø«ÙŠØ±Ø§Øª Ø¹Ù„Ù‰ ØµÙÙˆÙ Ø§Ù„Ø¬Ø¯ÙˆÙ„
    document.querySelectorAll('.table-clean tbody tr').forEach(row => {
      row.addEventListener('mouseenter', function() {
        this.style.background = 'var(--primary-50)';
        this.style.transform = 'translateX(5px)';
      });
      
      row.addEventListener('mouseleave', function() {
        this.style.background = '';
        this.style.transform = 'translateX(0)';
      });
    });

  })();
  </script>

  <style>
  .my-requests-page .form-grid-4 {
    grid-template-columns: repeat(4, 1fr);
  }

  .my-requests-page .form-field {
    margin-bottom: 0;
  }

  .my-requests-page .form-label {
    display: block;
    font-weight: 600;
    color: var(--dark-700);
    margin-bottom: 0.5rem;
    font-size: 0.95rem;
  }

  .my-requests-page .input {
    width: 100%;
    padding: 0.75rem 1rem;
    border: 1px solid var(--dark-300);
    border-radius: var(--radius-lg);
    background: var(--white);
    font-family: inherit;
    font-size: 1rem;
    transition: var(--transition);
  }

  .my-requests-page .input:focus {
    outline: none;
    border-color: var(--primary-500);
    box-shadow: 0 0 0 3px rgba(34, 197, 94, 0.1);
  }

  .my-requests-page .table-wrapper {
    overflow-x: auto;
    border-radius: var(--radius-xl);
    border: 1px solid var(--dark-200);
  }

  .my-requests-page .table-clean {
    width: 100%;
    border-collapse: collapse;
  }

  .my-requests-page .table-clean th {
    background: var(--dark-50);
    color: var(--dark-700);
    font-weight: 600;
    padding: 1rem;
    text-align: right;
    border-bottom: 1px solid var(--dark-200);
  }

  .my-requests-page .table-clean td {
    padding: 1rem;
    border-bottom: 1px solid var(--dark-100);
    vertical-align: top;
    transition: all 0.3s ease;
  }

  .my-requests-page .table-clean tr:last-child td {
    border-bottom: none;
  }

  .my-requests-page .table-cell-main {
    min-width: 200px;
  }

  .my-requests-page .table-cell-title {
    font-weight: 600;
    color: var(--dark-900);
    margin-bottom: 0.25rem;
  }

  .my-requests-page .table-cell-subtitle {
    color: var(--dark-600);
    font-size: 0.875rem;
    line-height: 1.4;
  }

  .my-requests-page .price-duration-info {
    min-width: 120px;
  }

  .my-requests-page .info-item {
    display: flex;
    justify-content: space-between;
    margin-bottom: 0.25rem;
  }

  .my-requests-page .info-label {
    color: var(--dark-500);
    font-size: 0.875rem;
  }

  .my-requests-page .info-value {
    color: var(--dark-700);
    font-weight: 600;
  }

  .my-requests-page .employee-info {
    min-width: 120px;
    font-size: 0.9rem;
  }

  .my-requests-page .table-actions {
    display: flex;
    gap: 0.5rem;
    flex-wrap: wrap;
  }

  .my-requests-page .text-muted {
    color: var(--dark-500);
  }

  .my-requests-page .pagination-inner {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 1rem;
  }

  .my-requests-page .pagination-info {
    padding: 0.5rem 1rem;
  }

  .my-requests-page .status-guide {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
  }

  .my-requests-page .request-preview {
    color: var(--dark-600);
    font-size: 0.9rem;
    line-height: 1.5;
    max-height: 3em;
    overflow: hidden;
  }

  .my-requests-page .mobile-cards {
    display: none;
  }

  @media (max-width: 768px) {
    .my-requests-page .form-grid-4 {
      grid-template-columns: 1fr;
    }
    
    .my-requests-page .employees-grid {
      grid-template-columns: 1fr;
    }
    
    .my-requests-page .table-actions {
      flex-direction: column;
    }
    
    .my-requests-page .table-actions .btn {
      width: 100%;
    }
    
    .my-requests-page .employee-stats {
      grid-template-columns: repeat(3, 1fr);
      gap: 0.5rem;
    }
    
    .my-requests-page .pagination-inner {
      flex-direction: column;
      gap: 0.5rem;
    }
  }

  @media (max-width: 480px) {
    .my-requests-page .employee-stats {
      grid-template-columns: repeat(3, 1fr);
    }
    
    .my-requests-page .stat-number {
      font-size: 1rem;
    }
    
    .my-requests-page .stat-label {
      font-size: 0.7rem;
    }
  }

  /* ØªØ£Ø«ÙŠØ±Ø§Øª Ø§Ù„Ø­Ø±ÙƒØ© */
  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .my-requests-page .scroll-reveal {
    animation: fadeInUp 0.6s ease-out;
  }
  </style>
{% endblock %}